---
title: ValueEater
layout: default
---
## Класс ValueEater ##
<p>Ссылка на  саму репу - <a href="https://github.com/Xaaalera/ValueEater">Тык</a></p>
<p>Класс предназначен для облегчения рутинной работы  и избежания копипасты из проекта в проект. Она конено же будет, о не в таком колличестве как раньше.</p>  
<p>1ая особенность данного класса является централизованность данных, а именно.</p>
<p>
Если вы встречаете  разновидность адресса допустим email  -
 а выглядит он вот так - ema-el , вы заходите на  
<a href="http://coolcodebro.ru/">Site</a>
добавляете это значение  в соответсвующуй столбик и всё, все остальные разработчики ,
 при послудущщем
использовании данного класса  получат ваше добавленное значение.
 Чтобы вам тоже его получить достаточно удалить файл array.json. 
</p> 
<p>
Вся эта таблица сделана для вас и вашего удобства, так что попрошу не 
вписывать туда непонятно что. Т.к Всё находится в бета тестировании
нет возможности удалить то или иное значение, придется просить меня.
</p>
<p>


```
git clone git@github.com:Xaaalera/ValueEater.git
```


Добавлен файл `config.php` вы можете просто подключать его  и вбивать там свои настройки ,он лежит в корне проекта.

Cоздаём экземпляр класса  ( в файле конфига все это есть)
</p>

``` 
require_once ('ValueEater/HelpDataWorker.php'); 
HelpDataWorker::$KEY = 'key';
HelpDataWorker::$markerInputId = 1232;
HelpDataWorker::$FormNameID = 12;
HelpDataWorker::$checkDuplicate = 1;
HelpDataWorker::$projectId = 145353;
HelpDataWorker::$debug = 1;
$roistat = new HelpDataWorker($array); 

```

Экземпляр класса принимает в себя `$array` -  в котором предполагается что содержится одномерный именнованный масив.(Регистр не важен
все переводится в нижний), но так же может быть создан без  массива, для последующей работы. **при передаче массива, все поля установятся Автоматически(name.phone,email и т.п)**.

`$markerInputId` -ИД маркера в CRM системе

`$FormNameID` - ИД поля с названием формы

`$checkDuplicate` - нужна ли проверка на дубли - если нужна ставим 1 -  тогда в куки будет записывать `sha1(md5($array))`
Данныхс таймером на 3 минуты и если точно такой же заказ поступит, то он не будет передан в проксилид/

`$projectId` - если собираемся отправлять события в ройстат  , то нужно установить ид проекта, **обязательно**. 

`$debug` - если решили быстро подебажить, включает отображение всех ошибок !
### Методы ###

```
$roistat->getScriptAction();
```
если коротко, то вернет landingPage.

```
$roistat->setCustomField($name, $value);
```
Установить нестандартное поле.

```
$roistat->getCustomfields();
```
получить список всех  нестандартных установленных полей


```
$roistat->setTitle($name);
```
Установить title, если тайтл не будет объявлен - его значение будет Заявка с формы {название формы}

```
$roistat->getTitle();
```
получить title


```
 $roistat->setFormName($name);
 ```
Установить Название формы 

```
$roistat->getFormName();
```
Получить название формы 
```
$roistat->setRoistatMarker($name);
```
Установить ройстат маркер, по умолчанию он берется из куков.

```
$roistat->getRoistatMarker();
```
получить ройстат маркер.
```
$roistat->setRoistatVisit($name);
```
установить ройстат визит, по умолчанию с куков берет.

```
$roistat->getRoistatVisit();
```
получить ройстат визит.

```
$roistat->setComment($name);
```
установить комментарий 


```
$roistat->getComment();
```
получить комментарий


```
$roistat->setEmail($name);
```
установить емейл


```
$roistat->getEmail();
```
получить емейл.


```
$roistat->setName($name);
```
установить имя , если оно не установленно или пустое - будет  стандартное `неизвестное имя`


```
$roistat->getName();
```
получить имя 


```
$roistat->setPhone($name);
```
установиьт телефон  - телефон забит на 11 цифр, обезает все плюсы и  скобки, заменяет 8 на 7


```
$roistat->getPhone();
```
получить номер телефона

```
$roistat->sendToRoistat();
```
Отправить все данные в ройстат, вернет резуьтат выполнения.

```
$roistat->checkDuplicate($array);
```
Если вы хотите производить поверку  по какому-то другому полю иди делать её вручную, для вас есть этот метод
возврашает `1` если дубликат возвращает `0` если нет.

```
$roistat->SendRequest($url);
```
отправляет `GET` c указанным url, возвращает  полученный результат если таковой имеется 

```
$roistat->sendEventToRoistat($eventName);
```
отправить в ройстат событие , вернет ответ который был получен от ройстат.

