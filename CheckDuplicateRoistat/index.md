---
title: Класс для проверки дублей перед отправкой проксилида Rostat
layout: default
---


# Класс для проверки дублей #

На данном этапе скрипт работает через счетчик ройстат, возможно в дальншейем будет какой-то другой инкремент.

<a href="https://github.com/Xaaalera/CheckDublicateRoistat">Репоизиторий</a>

Быстая установка
```

```

подключаем класс  -   используется папка ройстат т.к все свои скрипты я ложу именно в эту папку, возможно у вас будет какой то другой путь.
```
require_once $_SERVER['DOCUMENT_ROOT'].'/roistat/CheckDuplicate/src/CheckDuplicate.php';
```

создает экземпляр класса:
``` 
    $checker = new CheckDuplicate($array);
```
Принимает в себя:
1. `$array` - обятазтельный параметр  массив по которому будет происходить проверка на дубль.
2. `$filename` - название файла, где будет лежать всё добро , скрипт сам создаст папку ройстат и положит туда этот файл. - по умолчанию хэш.
3. `$numberrow` - максимальное колличество  записей хранимое в скрипте (каждая запись - новый пользователь) по умолчанию 50.
4. `$chektime` -  сколько  времени данные считаются дублем  в формате  `dateTime modified` - пример `5 minutes`по умолчанию 5 минут
Когда колличество пользователей достигнет 50 - 1ый добавленный удалиться, и добавиться новый пользователь.

Запускаем проверку на дубль.
``` 
 $ifDuplicate = $checker->start();
```
вернет 0 либо 1  в зависимости от результата, с полученым результатом  решайте что делать сами.

Пример как я использую  его на практике

``` 
$checker = new CheckDuplicate($array);
$ifDuplicate = $checker->start();
if ($ifDuplicate == 1){
    exit();
}
```

так же используется маг метод  для удобного вывода.ь 
```
echo  $checker ;
```
`$cheker` - экземпляр класса. 
Выведет JSON предлставление данных, для просмотра что уже есть  в файле.


